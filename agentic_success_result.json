{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://example.com/schemas/mkdocs-publisher.json",
  "definitions": {
    "action": {
      "name": "MkDocs Publisher",
      "author": "DevRel Team",
      "inputs": {
        "python-version": {
          "required": false,
          "default": "3.11",
          "description": "The version of Python to set up for building."
        },
        "requirements-file": {
          "required": true,
          "description": "Path to the Python requirements file."
        },
        "gh-token": {
          "required": true,
          "description": "GitHub token for deployment. Prefer using GITHUB_TOKEN environment variable directly if permissions allow."
        }
      },
      "outputs": {
        "page-url": {
          "description": "The URL of the deployed GitHub Pages site.",
          "value": "${{ steps.deploy.outputs.page_url }}"
        }
      },
      "steps": [
        {
          "id": "checkout_code",
          "name": "Checkout Code",
          "action": "actions/checkout@v4"
        },
        {
          "id": "setup_python",
          "name": "Setup Python",
          "action": "actions/setup-python@v5",
          "inputs": {
            "python-version": "${{ inputs.python-version }}"
          }
        },
        {
          "name": "Install Python Packages",
          "run": "pip install -r ${{ inputs.requirements-file }}",
          "shell": "bash"
        },
        {
          "name": "Build Site",
          "run": "mkdocs build",
          "shell": "bash"
        },
        {
          "id": "deploy",
          "name": "Deploy to GitHub Pages",
          "action": "peaceiris/actions-gh-pages@v3",
          "inputs": {
            "github_token": "${{ inputs.gh-token }}",
            "publish_dir": "./site"
          },
          "if": "github.ref == 'refs/heads/main'"
        }
      ],
      "branding": {
        "color": "blue",
        "icon": "book-open"
      }
    }
  }
}
